(function(t){function e(e){for(var o,r,i=e[0],u=e[1],c=e[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&m.push(a[r][0]),a[r]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},a={app:0},s=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0845":function(t,e,n){},"0e31":function(t,e,n){"use strict";n("3771")},1:function(t,e){},3771:function(t,e,n){},"4ac4":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("div",[n("v-app-bar",{attrs:{color:"deep-purple accent-4",dense:"",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!0}}}),n("v-toolbar-title",[t._v(t._s(t.title))]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:t.loginOrLogout}},[t.existUserId?n("v-icon",[t._v("mdi-logout")]):n("v-icon",[t._v("mdi-login")])],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.inChatRoom,expression:"inChatRoom"}]},[n("v-toolbar",{attrs:{dark:""}},[n("v-spacer"),t._v(" 접속자: "+t._s(t.userCnt)+"명 ")],1)],1),n("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{nav:""}},[n("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"},model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[n("v-list-item",{on:{click:function(e){return t.moveTo("Home")}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-home")])],1),n("v-list-item-title",[t._v("Home")])],1),n("v-list-item",{on:{click:function(e){return t.moveTo("AccountInfo")}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-account")])],1),n("v-list-item-title",[t._v("Account")])],1),n("v-list-item",{on:{click:function(e){return t.moveTo("ChatRoom")}}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-chat")])],1),n("v-list-item-title",[t._v("Chat")])],1)],1)],1)],1),n("v-main",[n("v-container",{attrs:{fluid:"","fill-height":"",aacontainer:""}},[n("router-view")],1)],1),n("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],r=(n("b0c0"),{name:"App",components:{},data:function(){return{drawer:null,group:null,snackbar:!1,timeout:1500,text:"로그아웃되었습니다."}},computed:{inChatRoom:function(){return"ChatRoom"===this.$route.name},title:function(){return this.$route.name},existUserId:function(){return""!==this.$store.state.userInfo.userInfo&&""!==this.$store.state.userInfo.userInfo.id},userCnt:function(){return this.$store.state.socket.userCnt}},methods:{loginOrLogout:function(){var t=this;console.log(this.$store.state.userInfo),this.existUserId?this.$http.get("/api/logout").then((function(e){console.log(e),t.$store.commit("setUserId",""),t.$router.push({name:"Home"}),t.snackbar=!0})).catch((function(t){console.log(t)})):this.$router.push({name:"Login"})},moveTo:function(t){this.$router.push({name:t})}}}),i=r,u=n("2877"),c=n("6544"),l=n.n(c),d=n("7496"),m=n("40dc"),p=n("5bc1"),f=n("8336"),v=n("a523"),h=n("132d"),g=n("8860"),b=n("da13"),y=n("1baa"),x=n("34c3"),k=n("5d23"),w=n("f6c4"),_=n("f774"),I=n("2db4"),V=n("2fa4"),$=n("71d9"),C=n("2a7f"),O=Object(u["a"])(i,a,s,!1,null,null,null),S=O.exports;l()(O,{VApp:d["a"],VAppBar:m["a"],VAppBarNavIcon:p["a"],VBtn:f["a"],VContainer:v["a"],VIcon:h["a"],VList:g["a"],VListItem:b["a"],VListItemGroup:y["a"],VListItemIcon:x["a"],VListItemTitle:k["b"],VMain:w["a"],VNavigationDrawer:_["a"],VSnackbar:I["a"],VSpacer:V["a"],VToolbar:$["a"],VToolbarTitle:C["a"]});var j=n("f309");o["a"].use(j["a"]);var M=new j["a"]({}),U=n("8c4f"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":""}},[t._v(" 채팅 프로그램에 오신 것을 환영합니다. ")])},A=[],L={data:function(){return{id:"",password:""}},computed:{nameValidation:function(){return""===this.id&&""===this.password}},created:function(){},methods:{onSubmit:function(){var t=this,e=this.id,n=this.password;this.$http.post("api/login",{id:e,password:n},{"Content-Type":"application-json"}).then((function(e){e.data.user?(t.$store.commit("setUserId",e.data.user.id),t.$router.push({name:"ChatRoom"})):e.data.message&&alert(e.data.message)})).catch((function(t){console.error(t)}))}}},D=L,E=n("a722"),P=Object(u["a"])(D,T,A,!1,null,null,null),R=P.exports;l()(P,{VLayout:E["a"]});var F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("form",[n("v-text-field",{attrs:{disabled:"",label:"ID"},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),n("v-text-field",{attrs:{disabled:"",label:"PASSWORD"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{attrs:{disabled:"",label:"NAME"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)])],1)},N=[],H={data:function(){return{}},computed:{id:function(){return this.$store.state.userInfo.userInfo.id},password:function(){return this.$store.state.userInfo.userInfo.password},name:function(){return this.$store.state.userInfo.userInfo.name}},created:function(){},methods:{}},B=H,G=n("0e8f"),q=n("8654"),W=Object(u["a"])(B,F,N,!1,null,null,null),J=W.exports;l()(W,{VFlex:G["a"],VLayout:E["a"],VTextField:q["a"]});var z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{ref:"id",attrs:{label:"ID",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),n("v-text-field",{ref:"password",attrs:{type:"password",label:"PASSWORD",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{disabled:t.nameValidation,rounded:"",color:"primary"},on:{click:t.onSubmit}},[t._v("LOGIN")]),n("v-divider",{staticClass:"mx-1",attrs:{vertical:""}}),n("v-btn",{attrs:{rounded:"",color:"primary"},on:{click:t.signUp}},[t._v("SIGN UP")])],1),n("div",[n("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.showAlert,expression:"showAlert"}],attrs:{type:"error"}},[t._v(" "+t._s(t.alertMessage)+" ")])],1)],1)],1)},K=[],Q={data:function(){return{id:"",password:"",showAlert:!1,alertMessage:""}},computed:{nameValidation:function(){return""===this.id&&""===this.password}},created:function(){var t=this;this.$http.get("/api/login").then((function(e){var n=e.data.user;n&&(t.$store.commit("setUserId",e.data.user.id),t.$router.push({name:"Home"}))})).catch((function(t){console.log(t)}))},methods:{onSubmit:function(){var t=this,e=this.id,n=this.password;this.$http.post("api/login",{id:e,password:n},{"Content-Type":"application-json"}).then((function(e){e.data.user?(t.$store.commit("setUserId",e.data.user),t.$router.push({name:"Home"})):e.data.message&&(t.showAlert=!0,t.alertMessage=e.data.message)})).catch((function(t){console.error(t)}))},signUp:function(){this.$router.push({name:"SignUp"})}}},X=Q,Y=n("0798"),Z=n("ce7e"),tt=Object(u["a"])(X,z,K,!1,null,null,null),et=tt.exports;l()(tt,{VAlert:Y["a"],VBtn:f["a"],VDivider:Z["a"],VFlex:G["a"],VLayout:E["a"],VTextField:q["a"]});var nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inner-wrap",attrs:{fluid:"","fill-height":"","inner-wrap":""}},[n("div",[n("v-toolbar",{attrs:{dark:""}},[n("v-app-bar-nav-icon"),n("v-toolbar-title",[t._v("Title")]),n("v-spacer"),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-magnify")])],1),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-heart")])],1),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-dots-vertical")])],1)],1)],1),n("Message-List",{staticClass:"msg-list",attrs:{msgs:t.msgDatas}}),n("Message-From",{staticClass:"msg-form",on:{submitMessage:t.sendMessage}})],1)},ot=[],at=n("5530"),st=n("2f62"),rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{directives:[{name:"auto-bottom",rawName:"v-auto-bottom",value:t.msgs,expression:"msgs"}]},t._l(t.msgs,(function(e,o){return n("div",{key:o},[n("v-list-item",[n("v-list-item-action",[n("span",[t._v(t._s(e.from.name))])]),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.msg))])],1)],1),n("v-divider",{attrs:{inset:""}})],1)})),0)},it=[],ut={name:"MessageList",props:["msgs"]},ct=ut,lt=(n("f6f4"),n("1800")),dt=Object(u["a"])(ct,rt,it,!1,null,null,null),mt=dt.exports;l()(dt,{VDivider:Z["a"],VList:g["a"],VListItem:b["a"],VListItemAction:lt["a"],VListItemContent:k["a"],VListItemTitle:k["b"]});var pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inner-wrap"},[n("v-text-field",{attrs:{placeholder:"보낼 메세지를 입력하세요.",solo:""},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.submitMessageFunc(e):null}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1)},ft=[],vt={name:"MessageForm",data:function(){return{msg:""}},methods:{submitMessageFunc:function(){return 0!==this.msg.length&&(this.$emit("submitMessage",this.msg),this.msg="",!0)}}},ht=vt,gt=Object(u["a"])(ht,pt,ft,!1,null,null,null),bt=gt.exports;l()(gt,{VTextField:q["a"]});var yt={PUSH_MSG_DATA:"pushMsgData"},xt={name:"ChatRoom",data:function(){return{datas:[]}},components:{"Message-List":mt,"Message-From":bt},computed:Object(at["a"])(Object(at["a"])({},Object(st["c"])({msgDatas:function(t){return t.socket.msgDatas}})),{},{userId:function(){return this.$store.getters.getUserId}}),mounted:function(){},created:function(){var t=this,e=this;this.$connect().then((function(){t.$socket.on("chat",(function(n){t.pushMsgData(n),e.datas.push(n)})),t.$socket.on("personCnt",(function(e){t.$store.commit("setUserCnt",e)}))}))},destroyed:function(){this.$socket.disconnect()},methods:Object(at["a"])(Object(at["a"])({},Object(st["b"])({pushMsgData:yt.PUSH_MSG_DATA})),{},{sendMessage:function(t){this.pushMsgData({from:{name:"나"},msg:t}),this.$sendMessage({name:this.userId,msg:t})}})},kt=xt,wt=(n("0e31"),Object(u["a"])(kt,nt,ot,!1,null,null,null)),_t=wt.exports;l()(wt,{VAppBarNavIcon:p["a"],VBtn:f["a"],VIcon:h["a"],VSpacer:V["a"],VToolbar:$["a"],VToolbarTitle:C["a"]});var It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-text-field",{ref:"id",attrs:{label:"ID",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}}),n("v-text-field",{ref:"password",attrs:{type:"password",label:"PASSWORD",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{ref:"name",attrs:{label:"NAME",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("div",{staticClass:"text-xs-center"},[n("v-btn",{attrs:{rounded:"",color:"primary"},on:{click:t.onSubmit}},[t._v("SIGN UP")])],1)],1)],1)},Vt=[],$t={data:function(){return{id:"",password:"",name:""}},created:function(){},methods:{onSubmit:function(){var t=this.id,e=this.password,n=this.name;this.$http.post("api/signup",{id:t,password:e,name:n},{"Content-Type":"application-json"}).then((function(t){console.log(t)})).catch((function(t){console.error(t)}))}}},Ct=$t,Ot=Object(u["a"])(Ct,It,Vt,!1,null,null,null),St=Ot.exports;l()(Ot,{VBtn:f["a"],VFlex:G["a"],VLayout:E["a"],VTextField:q["a"]});var jt,Mt=n("ade3"),Ut={msgDatas:[],userCnt:0},Tt={getUserCnt:function(t){return t.userCnt}},At={setUserCnt:function(t,e){var n=t.commit;n("setUserCnt",e)}},Lt=(jt={},Object(Mt["a"])(jt,yt.PUSH_MSG_DATA,(function(t,e){t.msgDatas.push(e)})),Object(Mt["a"])(jt,"setUserCnt",(function(t,e){t.userCnt=e})),jt),Dt={state:Ut,getters:Tt,actions:At,mutations:Lt},Et={userInfo:{id:"",password:"",name:""}},Pt={getUserId:function(t){return t.userInfo.id},getUserName:function(t){return t.userInfo.name}},Rt={setUserId:function(t,e){var n=t.commit;n("setUserId",e)}},Ft={setUserId:function(t,e){t.userInfo=e}},Nt={state:Et,getters:Pt,actions:Rt,mutations:Ft};o["a"].use(st["a"]);var Ht=!1,Bt=new st["a"].Store({modules:{socket:Dt,userInfo:Nt},strict:Ht}),Gt=n("bc3a"),qt=n.n(Gt);o["a"].use(U["a"]);var Wt=new U["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Home",component:R},{path:"/Login",name:"Login",component:et},{path:"/AccountInfo",name:"AccountInfo",component:J},{path:"/ChatRoom",name:"ChatRoom",component:_t},{path:"/SignUp",name:"SignUp",component:St}]});Wt.beforeEach((function(t,e,n){console.log("=== navigation guard ==="),""!=Bt.state.userInfo.userInfo.id||"AccountInfo"!=t.name&&"ChatRoom"!=t.name?n():qt.a.get("/api/login").then((function(t){var e=t.data.user;e?Bt.commit("setUserId",t.data.user):n("/Login")})).catch((function(t){console.log(t)}))}));var Jt,zt=Wt,Kt=(n("d3b7"),n("8055")),Qt=n.n(Kt),Xt="http://localhost:3001",Yt={install:function(t){t.mixin({}),t.prototype.$sendMessage=function(t){Jt.emit("chat",{msg:t.msg,name:t.name})},t.prototype.$connect=function(){return Jt=Qt()(Xt),t.prototype.$socket=Jt,Promise.resolve()},t.prototype.$socket=Jt}};o["a"].use(Yt);var Zt=n("88e5"),te=n.n(Zt);n("4ac4");o["a"].config.productionTip=!1,o["a"].use(te.a),o["a"].prototype.$http=qt.a,new o["a"]({router:zt,vuetify:M,store:Bt,render:function(t){return t(S)}}).$mount("#app")},"88e5":function(t,e){t.exports=function(t){t.directive("auto-bottom",{update:function(t){setTimeout((function(){t.scrollTop=t.scrollHeight}),0)}})}},f6f4:function(t,e,n){"use strict";n("0845")}});
//# sourceMappingURL=app.107df0e5.js.map